$(document).ready(function(){$('a[data-toggle="tab"]').on("show.bs.tab",function(e){console.log(e.target),localStorage.setItem("activeTab",$(e.target).attr("href"))});var e=localStorage.getItem("activeTab");e&&$('#myTab a[href="'+e+'"]').tab("show")});var animalDefaultObj=[{id:0,klass:"mammals",name:"whale",completed:!1},{id:1,klass:"mammals",name:"zebra",completed:!1},{id:2,klass:"mammals",name:"baboon",completed:!1},{id:3,klass:"mammals",name:"polar_bear",completed:!1},{id:4,klass:"mammals",name:"wombat",completed:!1},{id:5,klass:"fish",name:"piranha",completed:!1},{id:6,klass:"fish",name:"whale_shark",completed:!1},{id:7,klass:"fish",name:"jellyfish",completed:!1},{id:8,klass:"fish",name:"clownfish",completed:!1},{id:9,klass:"fish",name:"anglerfish",completed:!1},{id:10,klass:"insects",name:"ant",completed:!1},{id:11,klass:"insects",name:"grasshopper",completed:!1},{id:12,klass:"insects",name:"lady_bug",completed:!1},{id:13,klass:"insects",name:"roaches",completed:!1},{id:14,klass:"insects",name:"praying_mantis",completed:!1},{id:15,klass:"birds",name:"hummingbird",completed:!1},{id:16,klass:"birds",name:"eagle",completed:!1},{id:17,klass:"birds",name:"toucan",completed:!1},{id:18,klass:"birds",name:"pink_flamingo",completed:!1},{id:19,klass:"birds",name:"ostrich",completed:!1},{id:20,klass:"reptiles",name:"komodo_dragon",completed:!1},{id:21,klass:"reptiles",name:"rattlesnake",completed:!1},{id:22,klass:"reptiles",name:"crocodile",completed:!1},{id:23,klass:"reptiles",name:"tortoise",completed:!1},{id:24,klass:"reptiles",name:"anaconda",completed:!1}];function getAnimals(){return JSON.parse(localStorage.getItem("animals"))||animalDefaultObj}function setAnimals(e){localStorage.setItem("animals",JSON.stringify(e))}async function animalInit(){contentEl=document.getElementById("content"),window.innerHeight>contentEl.offsetHeight&&(contentEl.style.height=window.innerHeight+"px")}function updateCompletedAnimal(e){for(var a=getAnimals(),t=0;t<a.length;t++)a[t].name==e&&(a[t].completed=!0,a[t].completed&&($("#completeSelection").removeClass("is-warning"),$("#completeSelection").addClass("is-completed")));setAnimals(a)}function renderAnimalTypeOptions(){for(var e=["mammals","fish","reptiles","insects","birds"],a="",t=0;t<e.length;t++)a+='<div class="column is-one-third">',a+='<button class="selectionItem '+e[t]+'" data-type="klass" data-name="'+e[t]+'">'+humanize(e[t]),a+="</button>",a+="</div>";$("#appPrompt").html("Which Type of Animal Do You Want to Explore?"),$("#appActions").html(a)}function renderAnimalOptions(e){for(var a="",t=getAnimalsByType(e),n=0;n<t.length;n++){var i="";t[n].completed&&(i=" completed"),a+='<div class="column is-one-third">',a+='<button class="selectionItem '+t[n].name+i+'" data-type="animal" data-name="'+t[n].name+'">'+humanize(t[n].name),a+="</button>",a+="</div>"}$("#appActions").html(a+'<div class="column is-full has-text-centered"><button class="backToSelection button is-large">Back To Animal Types</button></div></div>')}async function renderAnimalModal(e){var a=await getAnimalByAnimalName(e);a&&($("#animalTitle").html(humanize(e)),$("#animalWiki").html(a.wiki),$("#animalGiphy").html(a.giphy),$("#animalImg").attr("src",a.image),$("#completeSelection").attr("data-name",e),$(".modal").show())}function getAnimalsByType(e){return getAnimals().filter(a=>{if(a.klass==e)return a})}async function getAnimalByAnimalName(e){return{wiki:await getWikiByAnimalName(e),giphy:await getGiphyByAnimalName(e),image:await getImageByAnimalName(e)}}function getWikiByAnimalName(e){return fetch("https://en.wikipedia.org/w/api.php?origin=*&action=query&prop=extracts&exintro&explaintext&redirects=1&titles="+e+"&format=json").then(e=>e.json()).then(function(e){return page=e.query.pages[Object.keys(e.query.pages)[0]],page.extract})}function getGiphyByAnimalName(e){return fetch("https://api.giphy.com/v1/gifs/search?q="+e+"&rating=G&api_key=wrXSrUy02o5zN56E5cFhtNzijtmeWcKe&limit=1").then(e=>e.json()).then(function(e){return html='<div style="width:100%;height:0;padding-bottom:56%;position:relative;">',html+='<iframe src="'+e.data[0].embed_url+'" width="100%" height="100%" style="position:absolute" frameBorder="0" class="giphy-embed" allowFullScreen></iframe>',html+="</div>",html})}function getImageByAnimalName(e){return fetch("https://pixabay.com/api/?key=22691826-3e6bf0771812c9d2424ab24b4&image_type=photo&order=popular&per_page=200&q="+e).then(e=>e.json()).then(function(e){return e.hits[0].largeImageURL})}function humanize(e){var a=e.split(","),t=[];for(let e=0;e<a.length;e++){var n=a[e].split("_"),i=[];for(let e=0;e<n.length;e++){var l=n[e].charAt(0).toUpperCase()+n[e].slice(1);i.push(l)}t.push(i.join(" "))}return t.join(" ")}$("#appActions").on("click",".startButton",function(){renderAnimalTypeOptions(),$(".monkey").addClass("hide-monkey")}),$("#appActions").on("click",".selectionItem",async function(e){var a=$(this).data("type"),t=$(this).data("name");"klass"==a?($("#appActions").html(""),renderAnimalOptions(t)):"animal"==a&&renderAnimalModal(t)}),$("#appActions").on("click",".backToSelection",async function(e){renderAnimalTypeOptions()}),$("#closeSelection").on("click",function(){$(".modal").hide()}),$("#completeSelection").on("click",function(e){$(".modal").hide(),updateCompletedAnimal($(this).attr("data-name"))}),animalInit();